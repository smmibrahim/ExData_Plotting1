library(reshape2)
png(filename="plot3.png",height=480,width=480)
hpc <- read.csv2("household_power_consumption.txt",header=TRUE,stringsAsFactors=FALSE,na.strings="?")
hpc$DateFormat <- as.Date(strptime(hpc$Date,"%d/%m/%Y"))
projdates <- hpc$DateFormat %in% c(as.Date("2007/02/01",format="%Y/%m/%d"),as.Date("2007/02/02",format="%Y/%m/%d"))
hpc2007020102 <- hpc[projdates,]
hpc2007020102$SubMeetering1 <- as.numeric(hpc2007020102$Sub_metering_1)
hpc2007020102$SubMeetering2 <- as.numeric(hpc2007020102$Sub_metering_2)
hpc2007020102$SubMeetering3 <- as.numeric(hpc2007020102$Sub_metering_3)
SubMeetering <- cbind(hpc2007020102$SubMeetering1,hpc2007020102$SubMeetering2,hpc2007020102$SubMeetering3)
SubMeetering <- data.frame(SubMeetering)
colnames(SubMeetering) <- c("Sub_meetering_1","Sub_meetering_2","Sub_meetering_3")
SubMeet <- melt(SubMeetering,measure=c("Sub_meetering_1","Sub_meetering_2","Sub_meetering_3"))
with(SubMeet,plot(ts(data=value),ylab="Energy sub meetering",type="n"))
with(subset(SubMeet,variable=="Sub_meetering_1"),lines(value,col="black"))
with(subset(SubMeet,variable=="Sub_meetering_2"),lines(value,col="red"))
with(subset(SubMeet,variable=="Sub_meetering_3"),lines(value,col="blue"))
legend("topright",lty=c(1,1,1),pch=c(NA,NA,NA),col=c("black","red","blue"),legend=c("Sub_meetering_1","Sub_meetering_2","Sub_meetering_3"))
dev.off()